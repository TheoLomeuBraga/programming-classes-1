[gd_scene format=3 uid="uid://tqksyflb33s7"]

[ext_resource type="PackedScene" uid="uid://bsx8jiiiluaoj" path="res://main_charter/main_charter.glb" id="1_12cjd"]
[ext_resource type="AnimationLibrary" uid="uid://cvya0qndreyt4" path="res://main_charter/template_psx_charter.glb" id="2_e4pt4"]
[ext_resource type="Script" uid="uid://cq4dl48ty6juf" path="res://main_charter/main_charter_model.gd" id="2_spmdf"]
[ext_resource type="Texture2D" uid="uid://b0c031euyg47x" path="res://main_charter/main_charter_charter.png" id="3_a8kth"]

[sub_resource type="Shader" id="Shader_a8kth"]
code = "// NOTE: Shader automatically converted from Godot Engine 4.6.stable's StandardMaterial3D.

shader_type spatial;
render_mode blend_mix, depth_draw_opaque, cull_back, diffuse_burley, specular_schlick_ggx, unshaded;

uniform vec4 albedo : source_color;
uniform sampler2D texture_albedo : source_color, filter_nearest, repeat_enable;

uniform float pallet_swap_precision : hint_range(0.0, 1.0, 0.01) = 0.1;

uniform vec4 color_1 : source_color;
uniform vec4 color_2 : source_color;
uniform vec4 color_3 : source_color;
uniform vec4 color_4 : source_color;
uniform vec4 color_5 : source_color;
uniform vec4 color_6 : source_color;

vec3 swap_color(vec3 color){
	
	vec4 original_colors[6];
	vec4 replace_colors[6] = vec4[6] (color_1,color_2,color_3,color_4,color_5,color_6);
	for (int i = 0; i < 6; i ++) {
		float clarity = (1.0 / 6.0) * float(i);
		
		original_colors[i] = vec4(clarity,clarity,clarity,1.0);
		
		if (distance(color, original_colors[i].xyz) <= pallet_swap_precision){
			return replace_colors[i].xyz;
		}
	}
}

void fragment() {

	vec4 albedo_tex = texture(texture_albedo, UV);
	ALBEDO = swap_color(albedo.rgb * albedo_tex.rgb);
	
	
	
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_a8kth"]
render_priority = 0
shader = SubResource("Shader_a8kth")
shader_parameter/albedo = Color(1, 1, 1, 1)
shader_parameter/texture_albedo = ExtResource("3_a8kth")
shader_parameter/pallet_swap_precision = 0.0999999977648
shader_parameter/color_1 = Color(1, 0, 0, 1)
shader_parameter/color_2 = Color(7.219613e-08, 0.24062404, 0.31766456, 1)
shader_parameter/color_3 = Color(0, 0, 0, 1)
shader_parameter/color_4 = Color(0.0006878486, 0, 0.28959927, 1)
shader_parameter/color_5 = Color(0, 1, 1, 1)
shader_parameter/color_6 = Color(0.8810738, 0.64282495, 0.3536496, 1)

[sub_resource type="AnimationNodeAdd2" id="AnimationNodeAdd2_a8kth"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_syhi2"]
animation = &"template_psx_charter/strong_shot_arms_only"
use_custom_timeline = true
timeline_length = 0.5
stretch_time_scale = true
start_offset = 0.0
loop_mode = 0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_a8kth"]
animation = &"template_psx_charter/jump_arms_only"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pabw2"]
animation = &"template_psx_charter/damage"
use_custom_timeline = true
timeline_length = 0.6
stretch_time_scale = true
start_offset = 0.0
loop_mode = 0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4js4s"]
animation = &"template_psx_charter/jump_legs_only"

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_a8kth"]
xfade_time = 0.1
input_0/name = "floor"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "air"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8dnml"]
animation = &"template_psx_charter/idle_arms_only"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_roc0x"]
animation = &"template_psx_charter/run_arms_only"
use_custom_timeline = true
timeline_length = 0.8
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_pabw2"]
blend_point_0/node = SubResource("AnimationNodeAnimation_8dnml")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_roc0x")
blend_point_1/pos = 1.0
min_space = 0.0

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_0j6v3"]
xfade_time = 0.1
input_0/name = "floor"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "air"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pih6y"]
animation = &"template_psx_charter/idle_legs_only"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_agity"]
animation = &"template_psx_charter/run_legs_only"
use_custom_timeline = true
timeline_length = 0.8
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_uewt4"]
blend_point_0/node = SubResource("AnimationNodeAnimation_pih6y")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_agity")
blend_point_1/pos = 1.0
min_space = 0.0

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_0j6v3"]
fadein_time = 0.1

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_vmmlx"]
fadein_time = 0.15

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_spmdf"]
graph_offset = Vector2(-457.39233, 57.96811)
nodes/output/position = Vector2(640, 140)
nodes/leg_speed/node = SubResource("AnimationNodeBlendSpace1D_uewt4")
nodes/leg_speed/position = Vector2(-640, 300)
nodes/leg_mode/node = SubResource("AnimationNodeTransition_0j6v3")
nodes/leg_mode/position = Vector2(-300, 320)
nodes/Animation/node = SubResource("AnimationNodeAnimation_4js4s")
nodes/Animation/position = Vector2(-780, 520)
nodes/Add2/node = SubResource("AnimationNodeAdd2_a8kth")
nodes/Add2/position = Vector2(42.620678, 79.219894)
nodes/arm_speed/node = SubResource("AnimationNodeBlendSpace1D_pabw2")
nodes/arm_speed/position = Vector2(-1140, -260)
nodes/shot/node = SubResource("AnimationNodeOneShot_vmmlx")
nodes/shot/position = Vector2(-380, -80)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_syhi2")
"nodes/Animation 2/position" = Vector2(-880, 100)
nodes/arm_mode/node = SubResource("AnimationNodeTransition_a8kth")
nodes/arm_mode/position = Vector2(-760, -220)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_a8kth")
"nodes/Animation 3/position" = Vector2(-1320, -40)
nodes/recive_hit/node = SubResource("AnimationNodeOneShot_0j6v3")
nodes/recive_hit/position = Vector2(380, 180)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_pabw2")
"nodes/Animation 4/position" = Vector2(-40, 460)
node_connections = [&"output", 0, &"recive_hit", &"leg_mode", 0, &"leg_speed", &"leg_mode", 1, &"Animation", &"Add2", 0, &"shot", &"Add2", 1, &"leg_mode", &"shot", 0, &"arm_mode", &"shot", 1, &"Animation 2", &"arm_mode", 0, &"arm_speed", &"arm_mode", 1, &"Animation 3", &"recive_hit", 0, &"Add2", &"recive_hit", 1, &"Animation 4"]

[node name="main_charter" unique_id=526971450 instance=ExtResource("1_12cjd")]
script = ExtResource("2_spmdf")

[node name="GeneralSkeleton" parent="metarig" parent_id_path=PackedInt32Array(995499517) index="0" unique_id=795613474]
bones/0/position = Vector3(0, 1.0077955, -0.05519997)
bones/0/rotation = Quaternion(0.0073002353, 0, 0, 0.99997336)
bones/4/rotation = Quaternion(-3.3527613e-08, 0, 0, 1)
bones/5/rotation = Quaternion(-2.9802322e-08, 0, 0, 1)
bones/6/rotation = Quaternion(-2.9802322e-08, 0, 0, 1)
bones/8/rotation = Quaternion(0.046681374, 0.74735117, -0.66080415, 0.051234838)
bones/9/rotation = Quaternion(-0.03700803, -0.7056339, -0.023718402, 0.707212)
bones/10/rotation = Quaternion(-6.9849198e-09, 0.70710677, -6.9849198e-09, 0.70710677)
bones/12/rotation = Quaternion(-0.054485053, 0.7446063, -0.6627676, -0.0577224)
bones/13/rotation = Quaternion(-0.05810469, 0.7041811, 0.037239186, 0.7066584)
bones/14/rotation = Quaternion(-6.9849198e-09, -0.70710677, 6.9849198e-09, 0.70710677)
bones/17/rotation = Quaternion(5.004609e-08, 0.019820238, 0.9998036, -8.404504e-09)
bones/18/rotation = Quaternion(1.581314e-16, 0.999601, -0.028249053, 2.446045e-16)
bones/19/rotation = Quaternion(1.5477922e-15, 0.70710677, -0.70710677, 6.99006e-16)
bones/22/rotation = Quaternion(3.7645805e-08, 0.019820238, 0.9998036, 6.9279995e-09)
bones/23/rotation = Quaternion(8.140316e-16, 0.999601, -0.028249053, 1.127487e-15)
bones/24/rotation = Quaternion(-4.0775158e-16, 0.70710677, -0.70710677, -2.0803727e-16)

[node name="spine_005" parent="metarig/GeneralSkeleton" index="0" unique_id=653184627]
transform = Transform3D(1, 0, 0, 0, 0.9998934, -0.014599955, 0, 0.014599955, 0.9998934, 0, 1.7165241, 0.023355784)

[node name="Cube_011" parent="metarig/GeneralSkeleton/spine_005" index="1" unique_id=811048575]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="Cube_012" parent="metarig/GeneralSkeleton/spine_005" index="2" unique_id=297382612]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="spine_004" parent="metarig/GeneralSkeleton" index="1" unique_id=57894702]
transform = Transform3D(1, 0, 0, 0, 0.9998934, -0.014600014, 0, 0.014600014, 0.9998934, 0, 1.6553869, -0.0019394506)

[node name="Cube_010" parent="metarig/GeneralSkeleton/spine_004" index="0" unique_id=2074817245]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="hand_L" parent="metarig/GeneralSkeleton" index="2" unique_id=1449703281]
transform = Transform3D(-0.0070304554, 0.14075205, -0.9900199, -0.03865517, -0.98934263, -0.14038117, -0.99922776, 0.037282463, 0.012396282, 0.25764936, 1.040355, 0.004102744)

[node name="Cube_005" parent="metarig/GeneralSkeleton/hand_L" index="0" unique_id=1194576324]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="forearm_L" parent="metarig/GeneralSkeleton" index="3" unique_id=542325756]
transform = Transform3D(-0.9900199, 0.14075205, 0.0070304526, -0.14038117, -0.98934263, 0.038655188, 0.012396282, 0.03728248, 0.99922776, 0.23604672, 1.2976524, -0.04502923)

[node name="Cube_003" parent="metarig/GeneralSkeleton/forearm_L" index="0" unique_id=1199849263]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="upper_arm_L" parent="metarig/GeneralSkeleton" index="4" unique_id=1157761078]
transform = Transform3D(0.0020623729, 0.12231755, -0.99248886, -0.12380078, -0.98482454, -0.12163015, -0.99230486, 0.12312175, 0.013111923, 0.1953, 1.582018, -0.01831238)

[node name="Cube_004" parent="metarig/GeneralSkeleton/upper_arm_L" index="0" unique_id=794712480]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="hand_R" parent="metarig/GeneralSkeleton" index="5" unique_id=634215496]
transform = Transform3D(-0.0094676735, -0.14453757, 0.989454, 0.010002283, -0.98946244, -0.14444298, 0.9999051, 0.008529259, 0.010813605, -0.2569901, 1.0384014, 0.0025092773)

[node name="Cube_018" parent="metarig/GeneralSkeleton/hand_R" index="0" unique_id=1536442476]
visible = false
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="forearm_R" parent="metarig/GeneralSkeleton" index="6" unique_id=517913304]
transform = Transform3D(-0.989454, -0.14453757, -0.009467671, 0.14444298, -0.98946244, 0.010002303, -0.010813605, 0.008529278, 0.9999051, -0.23430093, 1.2969182, -0.039165664)

[node name="Cube_016" parent="metarig/GeneralSkeleton/forearm_R" index="0" unique_id=424879942]
visible = false
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="Cube_019" parent="metarig/GeneralSkeleton/forearm_R" index="1" unique_id=307540944]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="upper_arm_R" parent="metarig/GeneralSkeleton" index="7" unique_id=501647768]
transform = Transform3D(0.004626751, -0.11554104, 0.99329185, 0.14374983, -0.982909, -0.11500276, 0.98960316, 0.14331762, 0.012061316, -0.1953, 1.582018, -0.01831238)

[node name="Cube_017" parent="metarig/GeneralSkeleton/upper_arm_R" index="0" unique_id=627067036]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="spine_003" parent="metarig/GeneralSkeleton" index="8" unique_id=538868499]
transform = Transform3D(1, 0, 0, 0, 0.9998934, -0.014600081, 0, 0.014600081, 0.9998934, 0, 1.4628272, 0.0007494583)

[node name="Cube_009" parent="metarig/GeneralSkeleton/spine_003" index="0" unique_id=1337446010]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="spine_001" parent="metarig/GeneralSkeleton" index="9" unique_id=869173352]
transform = Transform3D(1, 0, 0, 0, 0.9998934, -0.014600081, 0, 0.014600081, 0.9998934, 0, 1.154625, -0.01505198)

[node name="Cube_008" parent="metarig/GeneralSkeleton/spine_001" index="0" unique_id=250369880]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="foot_L" parent="metarig/GeneralSkeleton" index="10" unique_id=1518935600]
transform = Transform3D(-0.9999999, 1.00641316e-07, -1.3126733e-08, -1.6286204e-08, -0.031457953, 0.999505, 1.0017855e-07, 0.9995049, 0.031457953, 0.098000005, 0.085291654, -0.016115658)

[node name="Cube_001" parent="metarig/GeneralSkeleton/foot_L" index="0" unique_id=1214585063]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="shin_L" parent="metarig/GeneralSkeleton" index="11" unique_id=1937447651]
transform = Transform3D(0.9999999, 1.3126732e-08, -1.00641316e-07, 1.6286203e-08, -0.999505, 0.031457953, -1.0017855e-07, -0.031457953, -0.9995049, 0.09800001, 0.53565836, 0.042880908)

[node name="Cube" parent="metarig/GeneralSkeleton/shin_L" index="0" unique_id=1942607052]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="thigh_L" parent="metarig/GeneralSkeleton" index="12" unique_id=2078786037]
transform = Transform3D(-1, 1.8789555e-08, 9.973935e-08, -1.6286204e-08, -0.9996864, 0.025039852, 1.0017857e-07, 0.025039852, 0.9996864, 0.098, 1.069264, -0.011497855)

[node name="Cube_002" parent="metarig/GeneralSkeleton/thigh_L" index="0" unique_id=1459358605]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="foot_R" parent="metarig/GeneralSkeleton" index="13" unique_id=1062012452]
transform = Transform3D(-0.9999999, 7.473277e-08, 1.660806e-08, 1.42489e-08, -0.031457953, 0.999505, 7.521823e-08, 0.9995049, 0.031457953, -0.098, 0.085291654, -0.016115658)

[node name="Cube_014" parent="metarig/GeneralSkeleton/foot_R" index="0" unique_id=1995352739]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="shin_R" parent="metarig/GeneralSkeleton" index="14" unique_id=1992528960]
transform = Transform3D(0.9999999, -1.660806e-08, -7.473277e-08, -1.42489e-08, -0.999505, 0.031457953, -7.521823e-08, -0.031457953, -0.9995049, -0.098, 0.53565836, 0.042880908)

[node name="Cube_013" parent="metarig/GeneralSkeleton/shin_R" index="0" unique_id=465567546]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="thigh_R" parent="metarig/GeneralSkeleton" index="15" unique_id=760042042]
transform = Transform3D(-1, -1.2360978e-08, 7.555145e-08, 1.42489e-08, -0.9996864, 0.025039852, 7.521824e-08, 0.025039852, 0.9996864, -0.098, 1.069264, -0.011497855)

[node name="Cube_015" parent="metarig/GeneralSkeleton/thigh_R" index="0" unique_id=2044705490]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="spine" parent="metarig/GeneralSkeleton" index="16" unique_id=1444927609]
transform = Transform3D(1, 0, 0, 0, 0.9998934, -0.014600081, 0, 0.014600081, 0.9998934, 0, 1.0077955, -0.05519997)

[node name="Cube_007" parent="metarig/GeneralSkeleton/spine" index="0" unique_id=1693991145]
surface_material_override/0 = SubResource("ShaderMaterial_a8kth")

[node name="AnimationPlayer" type="AnimationPlayer" parent="metarig" parent_id_path=PackedInt32Array(995499517) index="1" unique_id=2124494970]
libraries/template_psx_charter = ExtResource("2_e4pt4")

[node name="AnimationTree" type="AnimationTree" parent="metarig" parent_id_path=PackedInt32Array(995499517) index="2" unique_id=1723731500]
tree_root = SubResource("AnimationNodeBlendTree_spmdf")
anim_player = NodePath("../AnimationPlayer")
parameters/leg_speed/blend_position = 0.0
parameters/leg_mode/current_state = "floor"
parameters/leg_mode/transition_request = ""
parameters/leg_mode/current_index = 0
parameters/Add2/add_amount = 1.0
parameters/arm_speed/blend_position = 0.0
parameters/shot/active = false
parameters/shot/internal_active = false
parameters/shot/request = 0
parameters/arm_mode/current_state = "floor"
parameters/arm_mode/transition_request = ""
parameters/arm_mode/current_index = 0
parameters/recive_hit/active = false
parameters/recive_hit/internal_active = false
parameters/recive_hit/request = 0
